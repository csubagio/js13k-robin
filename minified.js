let A=Math.round,t=Math.floor,e=Math.ceil,B=Math.pow,n=Math.abs,o=Math.min,Q=Math.max,r=Math.sin,E=Math.cos,w=Math.random,g=Math.PI,c=(A,t)=>A.charCodeAt(t);let l=0,D=0;function i(A){return A[t(w()*A.length)]}function C(t){return A(t[0]+(t[1]-t[0])*w())}let a=[];for(let A=0;A<32;++A)a[A]=i([0,1,2,3,4]);function s(A,t){return A+(t-A)*w()}function f(A,t){for(let e=0;e<A;++e)t(e)}function u(A,t){return!(!A||!t||n(t.x-A.x)>A.w+t.w||t.y-A.y>A.A||A.y-t.y>t.A)}function M(A){ne.globalAlpha=A}function F(A,t){(t||ne).fillStyle=A}new window.AudioContext;let I=new AudioContext;let U=[82,110,147,196,247,330,1e3];async function V(){await I.audioWorklet.addModule('data:text/javascript,class r extends AudioWorkletProcessor{letructor(r){super(),this.o=r.processorOptions.t.map((r=>{let s=0|44e3/r,e={i:new Float32Array(s),h:0,u:0,l:r,v:s,M:0};return e.i.fill(0),e})),this.port.onmessage=r=>{let[s,e]=r.data;s.map(((r,s)=>{if(+r===r){let t=this.o[s],a=0|44e3/(t.l*Math.pow(1.059,r));t.h=0,t.u=a,t.M=0;let o=t.i;o.map(((r,s)=>{o[s]=(e||1)*(2*Math.random()-1)}))}}))}}process(r,s,e){return s[0].map((r=>{r.map(((s,e)=>{r[e]=0,this.o.map((s=>{let t=s.i[s.h];s.h=++s.h%s.v,t=(t+s.i[s.h])/2*.995,s.u=++s.u%s.v,s.i[s.u]=t,s.M++,r[e]+=t*Math.min(1,s.M/500)}))}))})),!0}}registerProcessor("G",r)');let A=new AudioWorkletNode(I,"G",{processorOptions:{t:U}});return A.connect(I.destination),A}(async()=>{P=await V(),k=await V()})();let P,k,R=[];function h(A,t,e){I.resume(),R.push([O+1,A,t,e])}let G=[3,2,0,0,0,3],d=[,1,3,3,2,1],H=[1,3,3,1,1,1],T=[0,2,0,0,0,0],K=G;function x(A,t){let e=[];return e[t]=A[t],e}function p(A,t,e=.5){let B=i(t);h(A,x(K,B),e)}function S(A,t=.5){let e=i([[0,4],[1,3],[2,4]]),B=[];e.map((A=>B[A]=K[A])),h(A,B,t)}let Y,O=0,b=0;function m(A,t){let e=new OffscreenCanvas(A,t),B=e.getContext("2d");return B.imageSmoothingEnabled=!1,Y=B,{B:e,o:B}}function v(A,t,e,B){Y.beginPath(),F(UA[A],Y),Y.arc(t,e,B,0,6.3),Y.fill()}function y(A,t,e,B,n){F(UA[A],Y),Y.fillRect(t,e,B,n)}!function A(){requestAnimationFrame(A),b-=l,b<0&&(b+=.05,O++,R=R.filter((A=>A[0]>O||(A[1].port.postMessage([A[2],A[3]]),!1))))}();let J=["PRESS SPACE TO START","PRESS <> TO MOVE","PRESS ^ TO JUMP","EXIT AT THE GATE","APPROACH TO ENGAGE","PRESS SPACE TO LUNGE","WHEN ATTACKED, PRESS UP TO PARRY","PRESS DOWN TO FEINT"];let L=[],N=[],W=-1;function X(A){N[A]=!0,W===A&&Yt()}function q(A){Lt()&&A.map((A=>{-1!==W||N[A]||(St(`|${J[A]}|2`),W=A)}))}let z=[0,0],Z=[0,0],j=[0,0];function $(){ne.resetTransform()}function _(t,e){$(),ne.translate(-j[0],80-j[1]),ne.translate(A(t),A(-e))}function AA(t,e){$(),ne.translate(A(-j[0]*t),A(80-j[1]*e))}function tA(){ne.scale(-1,1)}function eA(A){let t=atob(A),e=[];for(let A=0;A<t.length;++A)e.push(c(t,A));return e}function BA(A){let t=eA(A),n=[];let o=0;for(;o<t.length;){let A=0,Q=0,r=0,E=0,w=0;A=t[o++],Q=t[o++],r=t[o++],E=t[o++],w=t[o++];let g={x:A,y:Q,g:w,l:[]};n.push(g);let c=t[o++],l=B(2,c);let D=[];1===c?D=[IA[t[0]],IA[t[o++]]]:f(l,(A=>D[A]=IA[t[o++]]));let i=(1<<c)-1,{B:C,o:a}=m(r,E),s={B:C};g.l.push(s);let u=e(r*E/8*c),M=a.getImageData(0,0,r,E),F=M.data;let I=0;for(let A=0;A<u;++A){let A=t[o++];for(let t=0;t<8;t+=c){let e=A>>t&i,B=D[e];F[I]=B[0],F[I+1]=B[1],F[I+2]=B[2],F[I+3]=e?255:0,I+=4}}a.putImageData(M,0,0)}return{D:n}}function nA(A,t){return{i:A,C:t,u:C(A),M:100*w()}}function oA(A,t){let e=A.D[t.u]?.g;if(t.M+=100*l,t.M>=e){if(t.M-=e,4===t.C||2===t.C?t.u--:t.u++,t.u>t.i[1])switch(t.F?.(),t.C){case 0:t.u=t.i[1],t.M=e;break;case 3:t.u=t.i[1]-1,t.C=4;break;default:t.u=t.i[0]}if(t.u<t.i[0])switch(t.C){case 4:t.u=t.i[0]+1,t.C=3;break;case 2:t.u=t.i[1];break;default:t.u=t.i[0]}}}function QA(t,e,B,n){let o=t.D[e];o.l.map((t=>{ne.drawImage(t.B,A(o.x+B),A(o.y+n))}))}function rA(A,t,e){A.i=t,(A.u<A.i[0]||A.u>A.i[1])&&(A.u=t[0]),A.C=e}function EA(A,t,e){A.i=t,A.u=t[0],A.C=e,A.M=0}function wA(A){let t=A.I.D[A.U.u].g;return A.U.u>=A.U.i[1]&&A.U.M>=t}function gA(A,t){return A.u-A.i[0]===t}let cA,lA=[];let DA=-100;function iA(A,t){let e={V:A,P:t,k:[]};for(let B=0;B<t;++B)for(let t=0;t<A;++t)e.k[B*A+t]={index:-1,R:0};return cA=e,e}function CA(A,t,e,B,n){let o=t;for(;o<e;++o){let t=cA.k[A*cA.V+o];t.index=C(B),t.R=n}}function aA(A,t,e,B,n,o=2){((A,t,e,B,n)=>{let o=t,Q=t+(e<=0?cA.P-1:e);for(;o<=Q;++o){let t=cA.k[o*cA.V+A];t.index=C(B),t.R=n}})(A,t,e-1,B,o),function(A,t,e,B){let n=cA.k[t*cA.V+A];n.index=C(e),n.R=B}(A,t+e-1,n,o)}function sA(A){if(!cA)return 0;let e=t(A[0]/8);if(e<0||e>=cA.V)return DA;let B=t(A[1]/8);for(;B>=0;--B){let t=cA.k[B*cA.V+e];if(t&&[1,2].indexOf(t.R)>=0){let t=8*B+8;if(t<A[1]+.05)return t}}return DA}function fA(A,e,B,n){if(!cA)return A;let o=A+n,Q=A+n+(n<0?-B:B),r=t((A-=.001*n)/8),E=t(Q/8);if(r===E)return o;let w=t(e/8);if(w<0)return o;if(r>E)for(;r!==E;){if(r--,r<0)return B;if(2===cA.k[w*cA.V+r].R)return 8*r+8+B}else for(;r!==E;){if(r++,r>=cA.V)return 8*cA.V-B;if(2===cA.k[w*cA.V+r].R)return 8*r-B}return o}let uA,MA=[1,1];function FA(A,t,e){AA(MA[0],MA[1]);let B=uA.D[A];ne.drawImage(B.l[0].B,8*t+B.x,-8*e+B.y-8)}let IA=[],UA=[];(()=>{let A=eA("IRgbcmdrR0FrbIxQ49JF+KRet0hGTigumkB+qspT+fXvmZ7XkWxSIzkq3b6L");for(let t=0;t<A.length/3;++t){let e=A.slice(3*t,3*t+3);IA.push(e),UA.push(`rgb(${e.join(",")})`)}})();let VA="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",PA=[0,4],kA=[5,8],RA=[9,10],hA=[11,12],GA=[13,15],dA=[16,18],HA=[19,20],TA=[21,21],KA=[22,25],xA=[26,27],pA=[28,29],SA=BA(VA),YA="AAABBgoBBS8AAAQDCgEFqgUAAAUGCgEFSH31FQAABQUKAQbqf0cAAAAFBQoBB6pGRQAAAAQGCgEFUqW1AAACAgoBBQYAAAMGCgEFVCICAAADBgoBBRGpAAABBQUKAQXVfVcBAAIDAwoBBboAAAQCAgoBBQYAAwMBCgEFBwAFAQEKAQUBAAADBgoBBaSUAAAAAwYKAQVqWwEAAAMGCgEFk6QDAAADBgoBBaOTAwAAAwYKAQWjyAEAAAMGCgEFrUkCAAADBgoBBc/IAQAAAwYKAQXOWgEAAAMGCgEFJ0kCAAADBgoBBapaAQAAAwYKAQWqyQEAAQEECgEFCQABAQUKAQUZAAAFBgoBBUT8LwgAAQMDCgEFxwEAAAUGCgEFBP2PCAAAAwYKAQUvBQEAAAQGCgEFn93xAAAEBgoBBZf5mQAABAYKAQWXefkAAAQGCgEFHhHhAAAEBgoBBZeZeQAABAYKAQUfF/EAAAQGCgEFHxcRAAAEBgoBBR6deQAABAYKAQWZn5kAAAMGCgEFl6QDAAADBgoBBSbZAwAABAYKAQWZNZUAAAQGCgEFERHxAAAFBgoBBXHXWisAAAUGCgEFcdaaIwAABQYKAQUuxhgdAAAEBgoBBZd5EQAABQYKAQUuxpgsAAAEBgoBBZd5mQAABAYKAQUeYfgAAAUGCgEFnxBCCAAABAYKAQWZmWkAAAUGCgEFMSpFCAAABQYKAQUxxlodAAAFBgoBBVERoiIAAAUGCgEFMUZHCAAABAYKAQXPJPMAAAMGCgEFT5IDAAADBgoBBYlEAgAAAwYKAQUnyQMAAAYGCgEFjNcyDAM=",OA=(BA(YA),{h:[0,2],G:[3,3],H:[4,4],T:[5,5],K:[6,10],p:[11,12],S:[13,13],Y:[14,14],O:[15,15],m:[16,17],v:[17,17]}),bA=BA("AAAICAoBCf/M//+dDQQEAAAIBwoBCf9s///95iYAAAgICgEJ/7T/7/l5ODACAAQIAAEM73///gAACAgAAQ7//3z/P348PAACCAYKAQ0gtf////8AAggGCgEGBAQMnv//AAAICAoBBggMDAyIwh7/AQAHCAoBBgQGBgoSGB4AAAgICgEGEDCgAAQMHH8AAAcICgEGKACAQHD4/gAACAcKAQE8fvDuXz9+AAAICAoBAXbvD2D+//9+AAAICAoBATh8fv79++deAAYIAgoBAWb3AAAICAoBASk56SkvKSkpAAAICAoBAUDgQEROROT/AAAICAoBDf//////////"),mA=[0,2],vA=[3,3],yA=[4,8],JA=BA("CggKERkBBThQwQcXOEAIIW58TAADBCCAAAQYQAAJBw0SGQEF4AAqwAe4AA6AIDjDH0cACAADIAAEAAEwAASAABAACwgOERkBBeAAVAAVwAcwAUwADtzn+AcQAAwAAUAACAADgAAgAAkFDhRkAQUAB6ACqAA+gAvgA3AA4PcPfgAEgAEgAAQAAUAAIAAYAAgAAggICREPAQXgQMOHDHkyO3hAwEBGBAggYIAAAQcODQsPAQUAyDd9w0r4sTJCRnAQAANAAAgGEhAHDwEFDgC/gdVCn0QZNhkEDgQEERMIDwEFDgCoAEAFAD4YkQGJr4w4RhggAgISFgcPAQUOAMAHAPABAnwAARViwEeQ6SyEAQ=="),LA=(BA("CQgNEAoBCOABQiATkkStlKlKVamVulKXabUuyck8woffCQkODwoBCEAA6ABBICcIEmVFnQr9WnW1rtlr8mQewge/AQ=="),{J:[0,2]}),NA=BA("DRAGCAoBBIwUtmkoMQ4QBAgKAQTW/b9rDxACCAoBBP//"),WA=BA("AAAWGQoBBADgAIA/APgegJ8H4MEBEGAAdAuAkQBgAAEYwAD2N4D9D8DDA/B/APgPcP4b4jxZMEAIEAgg+CEAAAAAAAB3dQDVFTBXBQAAFhkKAQQA4ACAPwD4HoCfB+DBARBgAHQLgJEAYAABGMAA9jeADQ/AwwPweQD4D3D+G+I8WTBACBAIIPghAAAAAAAAd3UA1RUwVwU="),XA=[0,3],qA=[4,6],zA=[7,9],ZA=[10,11],jA=[12,14],$A=[15,15],_A=[16,17],At=[18,19],tt=[20,22],et=BA("DQcJEQoBCT74sMCDBwYefrZp4sODAwUJEmMADQYJEgoBCTz8sMCDBwYMPPxs08SHBwcKEiXEAA0GCRIKAQk++LDAgwcGHn62aeLDAwMHChIkxgANBQkTCgEJAnjwYYEHDww8/GzTxIcHBg4UJEiMAQgHEREOAQl8APABYAGABwAPAAwgPCB8IPQgxiaAMYAEABEAIgCEAAgBGAYACQcREQ4BCQQA8ADgA8ACAA8AHiAYIHwg9CDGJoAxgAQAEQAhAEIAhAAMAwAKBxERDgEJeAD4AWABgAcADwAMIDwgfCD0IMYmgDGABIAIABEAIQBCAIYBAAoHERESAQkEAPAA4APAAgAPAB4gGCB8IPQgxiaAMQADwAeABAAEAAgAMAAACQYREhIBCXgA+AFgAYAHAA8ADCA8IHwg9CDGJoAxAA8AHgAUABgACAAIADAAAAgHEhESAQn4AMAHAAsAeADgAQADCB4QfiDnQQCbAIwBMABAAQAJAEMAAgEYDAACBxERGQEJgA+ADwAaAB4AOADgAOADYAewB9AP8P/x/9D/3wAI/BcAIMDAAAQHDhEyAQnAA/gBNIAH4AEwAD5AFogDYUAwCAwCTzAUAyFAGDAFBA4UKAEJgABAABCAC3AFdIGGBCGBifDBPwAPgAHAADAAFAAJMAQCgcECBhESEgEJABAAIACAAA4BLwJ0BDAQQCAAIwA//B8APADwAMACAAmAIYBAAAMDCAUQExIBCQCAAIAAQMBB8ENgQcAjgCOAEfAPzAPDA4ABgAOABUAEMAIIAhgGCAULEx4BCQIgAA/8wAJ84AVGfNR33mIQAyhAAiIQgRCGAQkIFhAUAQkQAAB4AAA+AIAFAMADAPAAAAwA4H8A5vF/eAAADADABwAIAQAiAEAIABgGAAkHDxEPAQkBAA+AD8ACwAPgAWAA/AB9AF4ARoDDQIIhARMBiADGAAcFERMPAQkAEABgAMARgMMDjw8eCz48/Hh8Yfzif+X/SkZVDGo8UESACAEgAmAMAAYEDhQPAQkAIAAIAAKAfCA+iAXBQ/AIGAE/4APEwDAAHkAEEAGEACLAGAoHEBEUAQkfAD4AFgA8ABwAGAY8Af4APgBeABwAJMBEMEgMiACEAIYBCQoSDjIBCfgBwAIAPwB4AeAJACMAXgD8APABwA8APwBMADMBdO0PBxQVBBkBCQDgA8D7PP//uPYP"),Bt=BA(YA);function nt(A,t,e,B=!1){let n=A;for(let o=0;o<e.length;++o){let Q=c(e,o);if(32===Q)n+=4;else if(10===Q)n=A,t+=8;else{let A=Bt.D[Q-33],e=A.l[0].B;B||ne.drawImage(e,n,t+A.y),n+=e.width+1}}return n-A}function ot(){uA=bA;let A=m(60,80);y(13,23,0,14,40),y(0,24,0,7,40);for(let A=0;A<10;++A){let t=1.173*A,e=30+17*r(t),B=45+14*E(t);v(13,e,B,16-A),v(0,e-i([1,2]),B+2,14-A)}for(let e=0;e<10;++e){let B=t(30*e+s(-7,8)),n=t(s(2,12));lA.push({L:A,N:[.4,1],x:B,y:n})}let e=iA(50,4);CA(0,0,50,OA.v,0),CA(1,0,50,OA.v,0),CA(2,0,50,OA.v,0),CA(3,0,50,OA.T,0),lA.push({W:e,N:[.5,.9],x:0,y:-2})}function Qt(A,t){aA(A,t,5,OA.p,OA.S,0),CA(t,A+1,A+4,OA.Y,0),aA(A+4,t,5,OA.p,OA.S,0),((A,t)=>{Ft(A,t,12,64,Kt,[0,0],(A=>{A.X=!1}),{0(A){A.q=!1},4(e){st(A,t),X(3),((A,t)=>{let e=O;f(6,(B=>{R.push([e,A,x(t,5-B),1]),e+=4})),f(6,(B=>{R.push([e,A,x(t,B),1]),e+=2}))})(k,G)}},{0(A){Pt>=kt&&Vt(A,2)},2(e){let B=((A,t,e)=>{let B=(e-0)/1.2;return B=B<0?0:B>1?1:B,B*B*(3-2*B)})(0,0,e.Z);e.x=A+2*w()-1,e.y=t-28*B,B>=1&&(e.x=A,Vt(e,3))},1(t){t.x=A,t.Z<.5&&(t.x=A+2*w()-1),t.Z>2&&Vt(t,0)},4(A){A.Z>1&&jt()}},{0(A){0===Ut&&Vt(A,1)},3(A){0===Ut&&Vt(A,4)}})})(8*(A+2)+3,rt)}let rt=8;let Et={87:38,65:37,83:40,68:39};let wt=[],gt=[];window.addEventListener("keydown",(A=>{let t=A.keyCode;wt[t]||(wt[t]=!0,gt[t]=!0,t=Et[t],wt[t]=!0,gt[t]=!0)})),window.addEventListener("keyup",(A=>{let t=A.keyCode;wt[t]=!1,t=Et[t],wt[t]=!1}));let ct=BA(VA);ct.D.map((A=>{A.l.map((A=>{let t=A.B,e=t.getContext("2d"),[B,n]=[t.width,t.height],o=e.getImageData(0,0,B,n),Q=o.data,r=IA[6];for(let A=0;A<n;++A)for(let t=0;t<B;++t){let e=4*(A*B+t);Q[e+3]&&(Q[e]=r[0],Q[e+1]=r[1],Q[e+2]=r[2],Q[e+3]=255)}e.putImageData(o,0,0)}))}));let lt={I:SA,U:nA(kA,1),x:10,y:8,j:1,w:2,A:12,dx:0,dy:0,Z:0,$:0,_:0,AA:1,tA:{x:0,y:0,w:26,A:12},focus:0,eA:4,BA:1,nA:0,oA:0,QA:!1,rA:0,EA:!1,wA:[],gA:3};let Dt=!0,it=0,Ct=null,at=[0,0];function st(A,t){11!==lt.AA&&(Ct=11,at=[A,t])}function ft(A){lt.wA.push(A)}function ut(A,t){lt.AA=0,Ct=1,it=[A,t]}let Mt=[];function Ft(A,t,e,B,n,o,Q,r,E,w){let g={I:n,U:nA(o,1),x:A,y:t,w:e,A:B,cA:r,lA:E,DA:w,Z:0,iA:0,AA:0,q:!0,X:!0,j:1,gA:2,CA:!0,dx:0};return Vt(g,0),Mt.push(g),Q(g),g}function It(A,t){let e=A[t.AA];e&&e(t),e=A[100],e&&e(t)}let Ut=0;function Vt(A,t){A.AA=t,A.Z=0,It(A.cA,A)}let Pt=0,kt=0;function Rt(A,t,e=!0,o=(()=>{})){return kt++,Ft(A,t,3,8,NA,LA.J,(A=>{A.CA=e,A.X=!1}),{0(A){A.q=!1,A.Z=5*w(),A.U.C=3},2(A){Pt++,A.U.u=0,p(k,[4,5],1),rA(A.U,LA.J,0),Vt(A,3),o()}},{0(A){A.y=t+3*n(r(A.Z*g*3))},1(A){let e=A.Z,B=20-17*e;A.x+=l*A.dx,A.y=t+n(r(e*g*3))*B,e>=1&&Vt(A,0)},3(A){A.y=t+35*B(A.Z,.5),A.Z>.5&&(Mt=Mt.filter((t=>t!=A)))}},{0(A){Vt(A,2)},1(A){A.Z>1&&Vt(A,2)}})}function ht(A,t,e){A.CA=!0,A.x=t,A.y=e,A.dx=t>lt.x?30:-30,Vt(A,1)}function Gt(A){A.j=lt.x>A.x?1:-1}function dt(A,t){let e=Rt(A,t,!1);return Ft(A,t,4,16,JA,mA,(A=>{A.aA=!0}),{0(A){rA(A.U,mA,3),A.U.C=3,A.q=!0},1(A){},2(A){K=d,h(k,K,1),A.q=!1,A.X=!1,A.aA=!1}},{0(A){Gt(A)},1(A){wA(A)&&Vt(A,0)},2(A){A.Z}},{0(A){1===Ut&&(A.gA-=1,0===A.gA?(EA(A.U,yA,0),Vt(A,2),ht(e,A.x,A.y)):(EA(A.U,vA,0),Vt(A,1)))},1:0,2:0})}NA.D.map((A=>{A.l.map((A=>{let t=A.B,e=t.getContext("2d"),[B,n]=[t.width,t.height],o=e.getImageData(0,0,B,n),Q=o.data,r=IA[10],E=(A,t)=>4*(t*B+A);for(let A=0;A<n;++A)for(let t=0;t<B;++t){let e=0;for(let B=t-1;B>=0;--B)if(Q[E(B,A)+3]){e+=1;break}for(let n=t+1;n<B;++n)if(Q[E(n,A)+3]){e+=1;break}for(let B=A-1;B>=0;--B)if(Q[E(t,B)+3]){e+=1;break}for(let B=A+1;B<n;++B)if(Q[E(t,B)+3]){e+=1;break}let o=E(t,A);4!=e||Q[o+3]||(Q[o]=r[0],Q[o+1]=r[1],Q[o+2]=r[2],Q[o+3]=255)}e.putImageData(o,0,0)}))}));let Ht=OA.O[0],Tt=OA.m[0],Kt={D:[((A,t,e,B,n,o)=>{let Q=new OffscreenCanvas(24,32),r=Q.getContext("2d"),E=0;for(let t=0;t<4;++t)for(let e=0;e<3;++e){let B=A.D[o[E++]];r.drawImage(B.l[0].B,8*e+B.x,8*t+B.y)}return{x:5,y:-8,g:100,l:[{B:Q}]}})(bA,0,0,0,0,[Tt,Tt,Tt,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht,Ht])]};function xt(A,t,e){let B=(e-t)/2;return{x:A.x+t+B,y:A.y,w:n(B),A:A.A}}function pt(A,t,e){A.iA>t&&(A.iA=0,e())}function St(A){let t=A.split("\n").map((A=>{let t=A.split("|");return{sA:t[0],fA:t[1],uA:parseInt(t[2])||0}}));Ot={lines:t},bt=-1,Jt()}function Yt(){Ot=0,W=-1}let Ot=0,bt=0,mt=0,vt=2,yt=!1;let Jt=()=>{bt++,mt=0,vt=2,yt=!1};function Lt(){return 0===Ot||bt>=Ot.lines.length}let Nt=0,Wt=0,Xt=!1,qt=-1,zt={};function Zt(A){qt=A;let t=_t[A];Mt=[],kt=0,Pt=0,cA=void 0,lA=[],Yt(),L=N.slice(0),Nt=0,Wt=0,Ae=t,Xt=!1,zt={},K=G,t.MA(t)}function jt(){Xt=!0}function $t(){N=L.slice(0),Zt(qt)}let _t=[{MA(A){ut(0,0)},FA(){Nt>3&&q([0]),nt(3,3,"ROBIN\nOF\nTHIRTEENSLEY"),gt[32]&&(h(k,G,1),X(0),jt())},IA:2,title:!0},{MA(){ut(0,0),st(0,0),St("|THOU HAST WONNETH\n|THANK THEE FOR PLAYING!|2")},FA(){(Nt>10||gt[32])&&(Yt(),jt())},IA:0,title:!0},{MA(){(()=>{ot();let A=iA(100,20);lA.push({W:A,N:[1,1],x:0,y:0});let t=26,e=1,B=()=>8*t+4;CA(0,0,24,OA.h,1),aA(7,1,5,OA.G,OA.H),t=10,ut(B(),24),t+=6,Rt(B(),rt),t+=6,f(4,(A=>{CA(e,t,t+3,OA.h,1),Rt(8*(t+1)+4,8*(e+1),!0,(()=>X(2))),t+=5,e+=2})),e=1,CA(0,t,t+24,OA.h,1),t+=12,Qt(t,e),Rt(400,rt)})(),St("J|HAH, YOU THINK YOU CAN JOIN OUR BAND?!\nJ|PROVE IT. COLLECT ALL THE COIN")},FA(){q([1,2]),Pt>=kt&&q([3])},UA(){St("J|A MONKEY COULD HAVE DONE THAT...")},IA:3},{MA(){(()=>{ot();let A=iA(100,20);lA.push({W:A,N:[1,1],x:0,y:0});let t=26,e=()=>8*t+4;CA(0,0,48,OA.h,1),t=3,ut(e(),24),t+=6,Qt(t,1),t+=12,dt(e(),8),t+=6,dt(e(),8),t+=6,dt(e(),8)})(),St("J|OK, COINS DON'T JUST GROW ON TREES\nJ|SKEWER THESE TRAINING DUMMIES")},FA(){q([4,5])},UA(){St("J|WELL MAYBE YOU'RE NOT HOPELESS...")},IA:4},{MA(){(function(){ot();let A=iA(100,20);lA.push({W:A,N:[1,1],x:0,y:0});let t=3,e=()=>8*t+4;CA(0,t,48,OA.h,1),t+=3,ut(e(),24),t+=6,Qt(t,1),t+=12,((A,t)=>{let e=Rt(A,8,!1),o={VA:!1,PA:!1};Ft(A,8,6,10,et,XA,(A=>{A.gA=5,A.aA=!0}),{0(A){o.VA=!1,o.PA=!0},1(A){rA(A.U,qA,3),o.VA||(A.iA=2),o.VA=!0,o.PA=!0},2(A){rA(A.U,zA,1)},4(A){A.dx=50*-A.j,EA(A.U,jA,0),A.gA--,A.gA<=0&&(K=d,h(k,K,1),ht(e,A.x,A.y),Vt(A,8)),o.PA=!1},5(A){EA(A.U,$A,0)},6(A){A.dx=50*A.j,EA(A.U,_A,0)},3(A){EA(A.U,ZA,0)},7(A){EA(A.U,At,0),o.PA=!1},8(A){EA(A.U,tt,0),A.X=!1,A.q=!1,A.aA=!1}},{0(A){Gt(A),A.detect=xt(A,0,40*A.j)},1(A){A.q=!0,((A,t,e)=>{let B=n(lt.x-A.x);return B<20||B>30})(A)&&Vt(A,2),pt(A,3,(()=>Vt(A,5)))},2(A){((A,t,e,B)=>{Gt(A);let o=n(lt.x-A.x);return o<21?(A.x-=20*A.j*l,A.U.C=2,!1):!(o>29&&(A.x+=20*A.j*l,A.U.C=1,1))})(A)&&Vt(A,1),pt(A,3,(()=>Vt(A,5)))},4(A){A.q=!1,A.x+=A.dx*l,A.dx-=A.dx*(1-B(.01,l)),wA(A)&&Vt(A,1)},5(A){wA(A)&&Vt(A,6)},6(A){A.x+=A.dx*l,A.dx-=A.dx*(1-B(.01,l)),A.attack=xt(A,0,12*A.j),wA(A)&&(A.iA=0,Vt(A,1))},3(A){A.q=!1,wA(A)&&(A.iA=0,Vt(A,1))},7(A){wA(A)&&Vt(A,1)}},{100(A){1===Ut&&o.PA&&(((A,t)=>[3,4].indexOf(t)>=0)(0,A.AA)||!(w()>.5)&&N[6]?Vt(A,4):(lt.EA=!0,Vt(A,7))),4===Ut&&Vt(A,3)},0(A){2===Ut&&Vt(A,1)}})})(e())})(),St("J|LET'S TRY A REAL FIGHT\nJ|WILL, GET OVER HERE!")},FA(){q([6])},UA(){St("J|THAT WAS PRETTY GOOD!")},IA:1}];let Ae;Zt(4);let te=document.getElementById("c"),ee=128,Be=80;te.width=ee,te.height=Be,te.style.display="none";let ne=te.getContext("2d");ne.imageSmoothingEnabled=!1;let oe=0,Qe=document.createElement("canvas");document.body.appendChild(Qe),Qe.width=1024,Qe.height=640;let re=Qe.getContext("webgl2");{let A=[-1,-1,-1,1,1,-1,1,1],t=re.createBuffer();re.bindBuffer(re.ARRAY_BUFFER,t),re.bufferData(re.ARRAY_BUFFER,new Float32Array(A),re.STATIC_DRAW);let e="\nattribute vec2 c;\nvarying vec2 u;\nvoid main(void) {\nu=c*0.5+0.5;\nu.y=1.0-u.y;\ngl_Position=vec4(c,0.5,1.0);\n}",B=re.createShader(re.VERTEX_SHADER);re.shaderSource(B,e),re.compileShader(B);let n="\nprecision highp float;\nvarying vec2 u;\nuniform sampler2D t;\nvoid main(void) {\nvec2 a=u;\na.x+=sin(u.x*6.28)*0.01;\na.y+=sin(u.y*6.28)*0.01;\nvec4 c=texture2D(t,a);\nc.r=texture2D(t,a+vec2(0.003,0.0)).r;\nc.b=texture2D(t,a-vec2(0.003,0.0)).b;\nvec2 d=abs(2.0*u-1.0);\nfloat v=1.0-pow(d.x,20.0)-pow(d.y,20.0);\nfloat l=1.0-pow(d.x,4.0)-pow(d.y,4.0);\nc*=(0.5+0.6*l)*step(0.0,v)*(0.6+0.5*abs(sin(a.y*3.14*80.0)));\nc.a = 0.8;\ngl_FragColor=c;\n}",o=re.createShader(re.FRAGMENT_SHADER);re.shaderSource(o,n),re.compileShader(o);let Q=re.createProgram();re.attachShader(Q,B),re.attachShader(Q,o),re.linkProgram(Q),re.useProgram(Q),re.bindBuffer(re.ARRAY_BUFFER,t),re.vertexAttribPointer(0,2,re.FLOAT,!1,0,0),re.enableVertexAttribArray(0);let r=re.createTexture();re.bindTexture(re.TEXTURE_2D,r),re.texParameteri(re.TEXTURE_2D,re.TEXTURE_MIN_FILTER,re.LINEAR)}!function e(E){$(),F("#21181b"),ne.fillRect(0,0,ee,Be);let w=o(100,E-oe);if(0===oe&&(w=0),oe=E,l=w/1e3,D+=l,function(A){let t=500*l,e=Q(sA([A.x-2,A.y]),sA([A.x+2,A.y])),o=()=>!!(gt[38]&&A.$<2)&&(A.$||(A.BA=A.AA),A.y+=.1,A.dy=150,A.$++,A.eA=4,!0),E=e=>wt[37]?(A.dx-=t*e,!0):!!wt[39]&&(A.dx+=t*e,!0),w=()=>(A.y>e||0!=A.dy)&&(A.dy-=500*l,A.y+=A.dy*l,A.dy<0&&F(A.eA),!0),g=()=>A.y<=e&&A.dy<=0&&(A.y=e,A.dy=0,A._=e,A.$=0,10!==A.BA&&S(P),!0),c=()=>{let t=!1;return Mt.forEach((e=>{e.aA&&e.CA&&u(e,A.tA)&&(t=!0)})),t},i=()=>{c()&&(A.QA||(K=T),A.QA=!0,F(8),A.tA.w=52)},C=()=>{c()||(A.QA&&(K=G),A.QA=!1,F(9),A.tA.w=26)},a=()=>!!gt[32]&&F(7)||!!gt[40]&&F(12)||!!gt[38]&&F(13),s=()=>{A.wA.length>0&&(A.gA-=1,A.gA<=0&&$t()),A.wA.map((t=>{F(10),A.dx=A.x<t.x?-150:150,A.dy=100}))},f=()=>{let t=A.focus;0!==t&&(A.j=A.x<t.x?1:-1)},M=n(A.dx*l),F=t=>{if(A.AA!==t){switch(A.I=SA,A.AA=t,A.Z=0,t){case 1:rA(A.U,kA,1),M>.2&&F(2),i();break;case 2:rA(A.U,PA,1);break;case 3:p(P,[0,1]),EA(A.U,RA,1);break;case 4:rA(A.U,hA,1);break;case 5:rA(A.U,GA,1);break;case 6:rA(A.U,dA,1);break;case 7:A.dx=A.j*(D-A.rA<2?250:175),EA(A.U,HA,0);break;case 12:A.dx=75*A.j,EA(A.U,xA,0);break;case 13:A.dx=-10*A.j,EA(A.U,pA,0);break;case 8:case 9:EA(A.U,TA,0);break;case 10:A.BA=10,K=H,h(P,H,1),A.I=ct,A.eA=10,rA(A.U,hA,1);break;case 11:rA(A.U,KA,1)}return!0}};var I,U;Dt&&(F(5),Dt=!1),it&&(F(1),A.x=it[0],A.y=it[1],A.dx=0,A.dy=0,A._=sA([A.x,A.y]),A.gA=3,I=A.x,U=A.y,Z[0]=z[0]=I,Z[1]=z[1]=U,it=0);let V=9999999,k=0;Mt.forEach((t=>{if(t.q&&t.CA){let e=n(t.x-A.x),B=n(t.y-A.y);e<V&&B<16&&(V=e,k=t)}})),A.focus=k,A.Z+=l,null!==Ct&&(F(Ct),Ct=null),A.U.F=()=>{};let R=()=>{p(P,[3,4])};let d=!0;switch(A.nA=0,A.oA=0,A.EA=!1,A.AA){case 1:E(1)&&F(2),o()&&F(3),i(),w();break;case 2:A.U.F=R,A.Z>.25&&X(1),E(1),M<.1&&F(1),o()&&F(3),i(),w();break;case 3:E(.75),w(),o();break;case 4:w(),g()?F(1):o()&&F(3);break;case 5:X(4),d=!1,f(),E(.5)&&F(6),a(),C(),s(),w();break;case 6:A.U.F=R,d=!1,f(),E(.5),M<.1&&F(5),a(),C(),s(),w();break;case 7:d=!1,s(),gA(A.U,0)&&(A.nA={x:A.x+8*A.j,y:A.y,w:9,A:12}),wA(A)&&F(5),A.EA&&(F(10),A.dx=50*A.j,A.dy=50);break;case 12:d=!1,s(),wA(A)&&F(5);break;case 13:d=!1,gA(A.U,0)&&(A.oA={x:A.x+5*A.j,y:A.y,w:6,A:12}),wA(A)&&F(5),a();break;case 8:d=!1,wA(A)&&F(5);break;case 9:d=!1,wA(A)&&F(1);break;case 10:A.I=r(70*A.Z)>0?ct:SA,d=!1,w(),g()&&F(1);break;case 11:A.dx=0,A.dy=0;let t=1-B(.01,l);A.x+=(at[0]-A.x)*t,A.y+=(at[1]-A.y)*t}A.wA=[],A.dx*=B(.01,l),A.x=fA(A.x,A.y,A.w,A.dx*l),d&&(A.j=A.dx>=0?1:-1),A.y<=DA+1&&$t(),Mt.forEach((t=>{t.CA&&u(A,t)&&(t.q?ft(t):t.X&&(A.x=t.x-(A.w+t.w)*A.j))})),A.tA.x=A.x,A.tA.y=A.y,oA(A.I,A.U),((A,t)=>{z[0]=A,z[1]=t})(A.x+A.dx/4,A._+(A.y-A._)/4+10)}(lt),function(){let A=!1;Mt.forEach((t=>{t.CA&&(t.detect=void 0,t.attack=void 0,t.Z+=l,t.iA+=l,It(t.lA,t),u(lt.nA,t)&&(Ut=1,It(t.DA,t),A=!0),u(lt,t)&&(Ut=0,It(t.DA,t)),u(t.detect,lt)&&(Ut=2,It(t.DA,t)),u(t.attack,lt)&&(Ut=3,It(t.DA,t),ft(t)),u(t.attack,lt.oA)&&(Ut=4,It(t.DA,t),X(6),lt.rA=D,lt.dx=60),oA(t.I,t.U))})),A&&(S(P,1),X(5),lt.EA||(lt.dx*=.5))}(),Z[0]+=(z[0]-Z[0])*(1-B(.001,l)),Z[1]+=(z[1]-Z[1])*(1-B(.01,l)),j[0]=A(Z[0])-64,j[1]=40-A(Z[1]),lA.forEach((A=>{MA=A.N;let t=A.W;if(t)for(let e=0;e<t.P;++e)for(let B=0;B<t.V;++B){let n=t.k[e*t.V+B];!n||n.index<0||FA(n.index,A.x+B,A.y+e)}let e=A.L;e&&(AA(MA[0],MA[1]),ne.scale(1,-1),ne.drawImage(e.B,A.x,A.y));let B=A.kA;if(B){B.M+=100*l;let t=uA.D[B.u].g;B.M>t&&(B.M-=t,B.u++,B.u>B.i[1]&&(B.u=B.i[0])),FA(B.u,A.x,A.y)}})),Mt.forEach((A=>{A.CA&&(_(A.x,A.y),A.j<0&&tA(),QA(A.I,A.U.u,-16,-24))})),(A=>{_(A.x,A.y),A.j<0&&tA(),QA(A.I,A.U.u,-16,-24)})(lt),ne.resetTransform(),(()=>{if(0===Ot)return!1;let e=Ot.lines[bt];if(!e)return!1;if(mt+=l,yt&&(vt-=l),1===e.uA&&gt[90])return Jt();if(0===e.uA&&vt<0)return Jt();let B=22,n=3;e.sA&&(ne.resetTransform(),F(UA[0]),M(.5),ne.fillRect(0,52,22,28),M(1),QA(WA,yt?0:A(8*mt)%2,1,53),B=20,n=22);let Q=e.fA.split(" "),r="",E=[];for(;Q.length;)r.length+Q[0].length>B&&(E.push(r),r=""),r+=" "+Q.shift();E.push(r);let w=80-8*E.length-1,g=20*mt;return E.map((A=>{let e=o(g,A.length);M(.5),ne.fillRect(n,w-1,100,8),M(1);let B=A.substring(0,e),Q=nt(0,0,B,!0);nt(n+t((124-n-Q)/2),w,B),g-=e,w+=8})),yt=g>0,!0})()||kt&&(QA(NA,0,86,55),nt(107,72,`${Pt}/${kt}`)),!Ae.title){let A="";f(3,(t=>A+=t<lt.gA?"$":"%")),nt(56,4,A)}Nt+=l,Ae.FA?.(Ae),Xt?(zt.UA||(Ae.UA?.(),zt.UA=!0),Lt()&&(Wt-=3*l,Wt<0&&(Wt=0,Zt(Ae.IA)))):Wt=o(Wt+l,1),Wt<1&&(F(UA[0]),M(1-Wt),ne.fillRect(0,0,ee,Be),M(1)),gt=[],re.texImage2D(re.TEXTURE_2D,0,re.RGBA,re.RGBA,re.UNSIGNED_BYTE,te),re.drawArrays(re.TRIANGLE_STRIP,0,4),requestAnimationFrame(e)}(0);