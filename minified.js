let A=Math.round,t=Math.floor,B=Math.ceil,n=Math.pow,e=Math.abs,E=Math.min,Q=Math.max,o=Math.sin,g=Math.cos,w=Math.random,C=Math.PI,r=(A,t)=>A.charCodeAt(t);let D=0,i=0;function l(A){return A[t(w()*A.length)]}function c(t){return A(t[0]+(t[1]-t[0])*w())}function u(A,t){return A+(t-A)*w()}function f(A,t){for(let B=0;B<A;++B)t(B)}function F(A,t,B){for(let n=0;n<t;++n)for(let t=0;t<A;++t)B(t,n)}function I(A,t){return!(!A||!t||e(t.x-A.x)>A.w+t.w||t.y-A.y>A.A||A.y-t.y>t.A)}function M(A,t,B){let n=(B-t)/2;return{x:A.x+A.t*(t+n),y:A.y,w:e(n),A:A.A}}function a(A,t){return A.indexOf(t)>=0}function s(A){sB.globalAlpha=A}function U(A,t){(t||sB).fillStyle=A}function R(A,t,B){sB.drawImage(A,t,B)}let V=A=>A.getContext("2d"),H=()=>{},P=(new window.AudioContext,new AudioContext);let T=[82,110,147,196,247,330,1e3];async function O(){await P.audioWorklet.addModule('data:text/javascript,class r extends AudioWorkletProcessor{constructor(r){super(),this.o=r.processorOptions.t.map((r=>{let s=0|44e3/r,e={i:new Float32Array(s),h:0,u:0,l:r,v:s,M:0};return e.i.fill(0),e})),this.port.onmessage=r=>{let[s,e]=r.data;s.map(((r,s)=>{if(+r===r){let t=this.o[s],a=0|44e3/(t.l*Math.pow(1.059,r));t.h=0,t.u=a,t.M=0;let o=t.i;o.map(((r,s)=>{o[s]=(e||1)*(2*Math.random()-1)}))}}))}}process(r,s,e){return s[0].map((r=>{r.map(((s,e)=>{r[e]=0,this.o.map((s=>{let t=s.i[s.h];s.h=++s.h%s.v,t=(t+s.i[s.h])/2*.997,s.u=++s.u%s.v,s.i[s.u]=t,s.M++,r[e]+=t*Math.min(1,s.M/500)}))}))})),!0}}registerProcessor("G",r)');let A=new AudioWorkletNode(P,"G",{processorOptions:{B:T}});return A.connect(P.destination),A}let S=[];function h(){S=[]}function x(A,t,B){S.push([z+1,A,t,B])}let G=[];(async()=>{G[0]=await O(),G[1]=await O()})();let Y=[3,2,0,0,0,3],K=[1,3,3,2,1,1],d=[,1,3,3,2,1],p=[1,3,3,1,1,1],k=[0,2,0,0,0,0],N=[0,0,2,2,1,0],v=Y;function L(A,t){let B=[];return B[t]=A[t],B}function y(A,t){let B=[];return t.map(((t,n)=>t?B[n]=A[n]:0)),B}function m(A,t,B=.5){let n=l(t);x(A,L(v,n),B)}function J(A,t=.5){let B=l([[0,4],[1,3],[2,4]]),n=[];B.map((A=>n[A]=v[A])),x(A,n,t)}function W(A,t,B,n){S.push([z+B,1,t,n,A])}let q=0;function b(A,t){f(t,(()=>{W(A,L(A,0),q,.2),q+=7,W(A,y(A,[,,1]),q,.2),q++,W(A,y(A,[,,,1,1,1]),q,.2),q+=8,W(A,L(A,1),q,.2),q+=7,W(A,y(A,[,,1]),q,.2),q++,W(A,y(A,[,,,1,1,1]),q,.2),q+=8}))}let X,z=0,Z=0;function j(A,t){let B=new OffscreenCanvas(A,t),n=V(B);return n.imageSmoothingEnabled=!1,X=n,{o:B,g:n}}function $(A,t,B,n){X.beginPath(),U(dA[A],X),X.arc(t,B,n,0,6.3),X.fill()}function _(A,t,B,n,e){U(dA[A],X),X.fillRect(t,B,n,e)}let AA=["PRESS SPACE TO START","PRESS <> TO MOVE","PRESS ^ TO JUMP","EXIT AT THE GATE","APPROACH TO ENGAGE","PRESS SPACE TO LUNGE","WHEN ATTACKED, PRESS ^ TO PARRY","PRESS # TO FEINT, ENEMY MIGHT FLINCH","PRESS ^ IN AIR TO JUMP ONCE AGAIN"];let tA=[],BA=[],nA=-1;function eA(A){BA[A]=!0,nA===A&&AB()}function EA(A){oB()&&A.map((A=>{-1!==nA||BA[A]||(_t(`|${AA[A]}|2`),nA=A)}))}let QA=[0,0],oA=[0,0],gA=[0,0];function wA(){sB.resetTransform()}function CA(t,B){wA(),sB.translate(-gA[0],80-gA[1]),sB.translate(A(t),A(-B))}function rA(t,B){wA(),sB.translate(A(-gA[0]*t),A(80-gA[1]*B))}function DA(){sB.scale(-1,1)}function iA(A){return atob(A).split("").map((A=>r(A,0)))}function lA(A){let t=iA(A),e=[];let E=0;for(;E<t.length;){let A=0,Q=0,o=0,g=0,w=0;A=t[E++],Q=t[E++],o=t[E++],g=t[E++],w=t[E++];let C={x:A,y:Q,C:w,D:[]};e.push(C);let r=t[E++],D=n(2,r);let i=[];1===r?i=[KA[t[0]],KA[t[E++]]]:f(D,(A=>i[A]=KA[t[E++]]));let l=(1<<r)-1,{o:c,g:u}=j(o,g),F={o:c};C.D.push(F);let I=B(o*g/8*r),M=u.getImageData(0,0,o,g),a=M.data;let s=0;f(I,(A=>{let B=t[E++];f(8/r,(A=>{let t=B>>A*r&l,n=i[t];a[s]=n[0],a[s+1]=n[1],a[s+2]=n[2],a[s+3]=t?255:0,s+=4}))})),u.putImageData(M,0,0)}return{i:e}}function cA(A,t){A.i.map((A=>((A,t)=>{A.D.map((A=>{let B=A.o,n=V(B),[e,E]=[B.width,B.height],Q=n.getImageData(0,0,e,E),o=Q.data,g=KA[t];F(e,E,((A,t)=>{let B=4*(t*e+A);o[B+3]&&(o[B]=g[0],o[B+1]=g[1],o[B+2]=g[2],o[B+3]=255)})),n.putImageData(Q,0,0)}))})(A,t)))}function uA(A,t){return{l:A,u:t,F:c(A),I:100*w()}}function fA(A,t){let B=A.i[t.F]?.C;t.I+=100*D,t.I>=B&&(t.I-=B,a([4,2,5],t.u)?t.F--:t.F++,t.F>t.l[1]&&(t.M?.(),[()=>{t.F=t.l[1],t.I=B},()=>{t.F=t.l[0]},H,()=>{t.F=t.l[1]-1,t.u=4},H,H][t.u]()),t.F<t.l[0]&&[H,H,()=>t.F=t.l[1],H,()=>{t.F=t.l[0]+1,t.u=3},()=>{t.F=t.l[0]}][t.u]())}function FA(t,B,n,e){let E=t.i[B];E.D.map((t=>{R(t.o,A(E.x+n),A(E.y+e))}))}function IA(A,t,B){A.l=t,(A.F<A.l[0]||A.F>A.l[1])&&(A.F=t[0]),A.u=B}function MA(A,t,B){A.l=t,A.F=t[0],A.u=B,A.I=0}function aA(A){let t=A.U.i[A.R.F].C;return A.R.F>=A.R.l[1]&&A.R.I>=t}function sA(A,t){return A.F-A.l[0]===t}let UA,RA=[];let VA=-100;function HA(A,t){let B={V:A,H:t,P:[]};return F(A,t,((t,n)=>{B.P[n*A+t]={index:-1,T:0}})),UA=B,B}function PA(A,t,B,n){let e=UA.P[t*UA.V+A];e.index=c(B),e.T=n}function TA(A,t,B,n,e){let E=t;for(;E<B;++E){let t=UA.P[A*UA.V+E];t.index=c(n),t.T=e}}function OA(A,t,B,n,e,E=2){((A,t,B,n,e)=>{let E=t,Q=t+(B<=0?UA.H-1:B);for(;E<=Q;++E){let t=UA.P[E*UA.V+A];t.index=c(n),t.T=e}})(A,t,B-1,n,E),PA(A,t+B-1,e,E)}function SA(A){if(!UA)return 0;let B=t(A[0]/8);if(B<0||B>=UA.V)return VA;let n=t(A[1]/8),e=UA.P[n*UA.V+B];if(e&&a([2],e.T))return VA;for(;n>=0;--n)if(e=UA.P[n*UA.V+B],e&&a([1,2],e.T)){let t=8*n+8;if(t<A[1]+.05)return t}return VA}function hA(A,B,n,e){if(!UA)return A;let E=A+e,Q=A+e+(e<0?-n:n),o=t((A-=.001*e)/8),g=t(Q/8);if(o===g)return E;let w=t(B/8);if(w<0)return E;if(o>g)for(;o!==g;){if(o--,o<0)return n;if(2===UA.P[w*UA.V+o].T)return 8*o+8+n}else for(;o!==g;){if(o++,o>=UA.V)return 8*UA.V-n;if(2===UA.P[w*UA.V+o].T)return 8*o-n}return E}let xA,GA=[1,1];function YA(A,t,B){rA(GA[0],GA[1]);let n=xA.i[A];R(n.D[0].o,8*t+n.x,-8*B+n.y-8)}let KA=[],dA=[];(()=>{let A=iA("IRgbcmdrR0FrbIxQ49JF+KRet0hGTigumkB+qspT+fXvmZ7XkWxSIzkq3b6L");f(A.length/3,(t=>{let B=A.slice(3*t,3*t+3);KA.push(B),dA.push(`rgb(${B.join(",")})`)}))})();let pA="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",kA=[0,4],NA=[5,8],vA=[9,10],LA=[11,12],yA=[13,15],mA=[16,18],JA=[19,20],WA=[21,21],qA=[22,25],bA=[26,27],XA=[28,29],zA=lA(pA),ZA="AAABBgoBBS8AAAQDCgEFqgUAAAYGCgEFDMO0HgMAAAUFCgEG6n9HAAAABQUKAQeqRkUAAAAEBgoBBVKltQAAAgIKAQUGAAADBgoBBVQiAgAAAwYKAQURqQAAAAQGCgEF////AAIDAwoBBboAAAQCAgoBBQYAAwMBCgEFBwAFAQEKAQUBAAADBgoBBaSUAAAAAwYKAQVqWwEAAAMGCgEFk6QDAAADBgoBBaOTAwAAAwYKAQWjyAEAAAMGCgEFrUkCAAADBgoBBc/IAQAAAwYKAQXOWgEAAAMGCgEFJ0kCAAADBgoBBapaAQAAAwYKAQWqyQEAAQEECgEFCQABAQUKAQUZAAAFBgoBBUT8LwgAAQMDCgEFxwEAAAUGCgEFBP2PCAAAAwYKAQUvBQEAAAQGCgEFn93xAAAEBgoBBZf5mQAABAYKAQWXefkAAAQGCgEFHhHhAAAEBgoBBZeZeQAABAYKAQUfF/EAAAQGCgEFHxcRAAAEBgoBBR6deQAABAYKAQWZn5kAAAMGCgEFl6QDAAADBgoBBSbZAwAABAYKAQWZNZUAAAQGCgEFERHxAAAFBgoBBXHXWisAAAUGCgEFcdaaIwAABQYKAQUuxhgdAAAEBgoBBZd5EQAABQYKAQUuxpgsAAAEBgoBBZd5mQAABAYKAQUeYfgAAAUGCgEFnxBCCAAABAYKAQWZmWkAAAUGCgEFMSpFCAAABQYKAQUxxlodAAAFBgoBBVERoiIAAAUGCgEFMUZHCAAABAYKAQXPJPMAAAMGCgEFT5IDAAADBgoBBYlEAgAAAwYKAQUnyQMAAAYGCgEFjNcyDAM=",jA=(lA(ZA),{O:[0,2],S:[3,3],h:[4,4],G:[5,5],Y:[6,10],K:[11,12],p:[13,13],k:[14,14],N:[15,15],v:[16,17],L:[17,17]}),$A=lA("AAAICAoBCf/M//+dDQQEAAAIBwoBCf9s///95iYAAAgICgEJ/7T/7/l5ODACAAQIAAEM73///gAACAgAAQ7//3z/P348PAACCAYKAQ0gtf////8AAggGCgEGBAQMnv//AAAICAoBBggMDAyIwh7/AQAHCAoBBgQGBgoSGB4AAAgICgEGEDCgAAQMHH8AAAcICgEGKACAQHD4/gAACAcKAQE8fvDuXz9+AAAICAoBAXbvD2D+//9+AAAICAoBATh8fv79++deAAYIAgoBAWb3AAAICAoBASk56SkvKSkpAAAICAoBAUDgQEROROT/AAAICAoBDf//////////"),_A=[0,2],At=[3,3],tt=[4,8],Bt=lA("CggKERkBBThQwQcXOEAIIW58TAADBCCAAAQYQAAJBw0SGQEF4AAqwAe4AA6AIDjDH0cACAADIAAEAAEwAASAABAACwgOERkBBeAAVAAVwAcwAUwADtzn+AcQAAwAAUAACAADgAAgAAkFDhRkAQUAB6ACqAA+gAvgA3AA4PcPfgAEgAEgAAQAAUAAIAAYAAgAAggICREPAQXgQMOHDHkyO3hAwEBGBAggYIAAAQcODQsPAQUAyDd9w0r4sTJCRnAQAANAAAgGEhAHDwEFDgC/gdVCn0QZNhkEDgQEERMIDwEFDgCoAEAFAD4YkQGJr4w4RhggAgISFgcPAQUOAMAHAPABAnwAARViwEeQ6SyEAQ=="),nt=(lA("CQgNEAoBCOABQiATkkStlKlKVamVulKXabUuyck8woffCQkODwoBCEAA6ABBICcIEmVFnQr9WnW1rtlr8mQewge/AQ=="),{m:[0,2]}),et=lA("DRAGCAoBBIwUtmkoMQ4QBAgKAQTW/b9rDxACCAoBBP//"),Et=lA("AAAWGQoBBADgAIA/APgegJ8H4MEBEGAAdAuAkQBgAAEYwAD2N4D9D8DDA/B/APgPcP4b4jxZMEAIEAgg+CEAAAAAAAB3dQDVFTBXBQAAFhkKAQQA4ACAPwD4HoCfB+DBARBgAHQLgJEAYAABGMAA9jeADQ/AwwPweQD4D3D+G+I8WTBACBAIIPghAAAAAAAAd3UA1RUwVwUBAhMXCgEEwAYAXwAMBDBAgLgDICBASAEBCChAQAAChBEgjIADDv77+OEvL56QYwAIAEAAAADA1RWkYiB3BQECExcKAQTABgBfAAwEMECAuAMgIEBIAQEIKEBAAALEESCAgAMO/vv44S8vnpBjAAgAQAAAAMDVFaRiIHcFAQAUGQoBBIA/AP4P8P8BBxAwPwD4FxgA4gRoJ7N+I+o3gG4DaCSAxsJoSECDDRJYv8EMGr6/8wd+//8HAAB8d0V1cVQVAgEAFBkKAQSAPwD+D/D/AQcQMD8A+BcYAOIEaCezfiPqN4BuA2gkgMbCaEhMgw0SWKHB7Bu+v/MHfv//BwAAfHdFdXFUFQI="),Qt="DQcJEQoBCT74sMCDBwYefrZp4sODAwUJEmMADQYJEgoBCTz8sMCDBwYMPPxs08SHBwcKEiXEAA0GCRIKAQk++LDAgwcGHn62aeLDAwMHChIkxgANBQkTCgEJAnjwYYEHDww8/GzTxIcHBg4UJEiMAQgHEREOAQl8APABYAGABwAPAAwgPCB8IPQgxiaAMYAEABEAIgCEAAgBGAYACQcREQ4BCQQA8ADgA8ACAA8AHiAYIHwg9CDGJoAxgAQAEQAhAEIAhAAMAwAKBxERDgEJeAD4AWABgAcADwAMIDwgfCD0IMYmgDGABIAIABEAIQBCAIYBAAoHERESAQkEAPAA4APAAgAPAB4gGCB8IPQgxiaAMQADwAeABAAEAAgAMAAACQYREhIBCXgA+AFgAYAHAA8ADCA8IHwg9CDGJoAxAA8AHgAUABgACAAIADAAAAgHEhESAQn4AMAHAAsAeADgAQADCB4QfiDnQQCbAIwBMABAAQAJAEMAAgEYDAACBxERGQEJgA+ADwAaAB4AOADgAOADYAewB9AP8P/x/9D/3wAI/BcAIMDAAAQHDhEyAQnAA/gBNIAH4AEwAD5AFogDYUAwCAwCTzAUAyFAGDAFBA4UKAEJgABAABCAC3AFdIGGBCGBifDBPwAPgAHAADAAFAAJMAQCgcECBhESEgEJABAAIACAAA4BLwJ0BDAQQCAAIwA//B8APADwAMACAAmAIYBAAAMDCAUQExIBCQCAAIAAQMBB8ENgQcAjgCOAEfAPzAPDA4ABgAOABUAEMAIIAhgGCAULEx4BCQIgAA/8wAJ84AVGfNR33mIQAyhAAiIQgRCGAQkIFhAUAQkQAAB4AAA+AIAFAMADAPAAAAwA4H8A5vF/eAAADADABwAIAQAiAEAIABgGAAgHEBEPAQkCADwAfAAsAHgAeAAwAPwA+gB5ATECOQxIMEjAiACIAIwBBwUREw8BCQAQAGAAwBGAwwOPDx4LPjz8eHxh/OJ/5f9KRlUMajxQRIAIASACYAwABgQOFCgBCQAgAAgAAoB8ID6IBcFD8AgYAT/gA8TAMAAeQAQQAYQAIsAYCgcQERQBCR8APgAWADwAHAAYBjwB/gA+AF4AHAAkwEQwSAyIAIQAhgEJChIOMgEJ+AHAAgA/AHgB4AkAIwBeAPwA8AHADwA/AEwAMwF07Q8HFBUEGQEJAOADwPs8//+49g8=",ot={m:[0,3],J:[4,6],advance:[7,9],W:[10,11],q:[12,14],X:[15,15],Z:[16,17],j:[18,19],$:[20,22]},gt=lA(Qt),wt=[0,1],Ct=[2,3],rt=[4,5],Dt=lA("BQ0VCwoBCAAEAYAxwNeF/f/BPz/4VyX/quS/f/z3g2sGoIgABQwVDAoBCAAEAYAxANAF+P6BPz/+VyX/quS/f/z3g/8GsNkAIQoABQwVDBQBCAAEAYAxANAF+P6xPz/4VyX/quS/f/z3g/8GsFkAEgoABQ0VCxQBCAAEAYAxwNeF/P7hPz/4VyX/quS/f/z3g40CkEAABQUUExQBCAAgAAACACAAAAAAIAAAAAAEAcAYAPwBwD/wo4K/qv+ryn9//P/DfwH8FcBGACQEAAULFA0UAQgABAHAGAD8AcA/8OOTv6r+q8p/f/z/w38B/BXARgAkBAA="),it=[0,2],lt=lA("CBcQAQoBDv//CBAQCAoBDhAQODi4OJAQUBR8fHg4//8IChAOCgEOEBA4OFRUEBAQERERERGSEJISlJKUVFhUWDn//w=="),ct=lA(ZA);function ut(A,t,B,n=!1){let e=A;return f(B.length,(E=>{let Q=r(B,E);if(32===Q)e+=4;else if(10===Q)e=A,t+=8;else{let A=ct.i[Q-33],B=A.D[0].o;n||R(B,e,t+A.y),e+=B.width+1}})),e-A}function ft(){xA=$A;let A=j(60,80);_(13,23,0,14,40),_(0,24,0,7,40),f(10,(A=>{let t=1.173*A,B=30+17*o(t),n=45+14*g(t);$(13,B,n,16-A),$(0,B-l([1,2]),n+2,14-A)})),f(20,(B=>{let n=t(30*B+u(-7,8)),e=t(u(2,12));RA.push({_:A,AA:[.4,1],x:n,y:e})}));let B=HA(80,4);TA(0,0,80,jA.L,0),TA(1,0,80,jA.L,0),TA(2,0,80,jA.L,0),TA(3,0,80,jA.G,0),RA.push({tA:B,AA:[.5,.9],x:0,y:-2})}function Ft(A,t){OA(A,t,5,jA.K,jA.p,0),TA(t,A+1,A+4,jA.k,0),OA(A+4,t,5,jA.K,jA.p,0),((A,t)=>{Gt(A,t,12,64,bt,[0,0],(A=>{A.BA=!1}),{0(A){A.nA=!1},4(B){Ot(A,t),eA(3),((A,t)=>{let B=z;f(6,(A=>{S.push([B,1,L(t,5-A),1]),B+=4})),f(6,(A=>{S.push([B,1,L(t,A),1]),B+=2}))})(0,Y)}},{0(A){Nt>=vt&&pt(A,2)},2(B){let n=((A,t,B)=>{let n=(B-0)/1.2;return n=n<0?0:n>1?1:n,n*n*(3-2*n)})(0,0,B.eA);B.x=A+2*w()-1,B.y=t-28*n,n>=1&&(B.x=A,pt(B,3))},1(t){t.x=A,t.eA<.5&&(t.x=A+2*w()-1),t.eA>2&&pt(t,0)},4(A){A.eA>1&&lB()}},{0(A){dt(0)&&pt(A,1)},3(A){dt(0)&&pt(A,4)}})})(8*(A+2)+3,It)}let It=8,Mt={87:38,65:37,83:40,68:39};let at=[],st=[];window.addEventListener("keydown",(A=>{P.resume();let t=A.keyCode;at[t]||(at[t]=!0,st[t]=!0,t=Mt[t],at[t]=!0,st[t]=!0)})),window.addEventListener("keyup",(A=>{let t=A.keyCode;at[t]=!1,t=Mt[t],at[t]=!1}));let Ut=lA(pA);cA(Ut,6);let Rt={EA:!1,U:zA,R:uA(NA,1),x:10,y:8,t:1,w:2,A:12,dx:0,dy:0,eA:0,QA:0,oA:0,gA:1,wA:{x:0,y:0,w:26,A:12},focus:0,CA:4,rA:1,DA:0,iA:0,lA:0,cA:!1,uA:0,fA:0,FA:!1,IA:[],MA:3};let Vt=!0,Ht=0,Pt=null,Tt=[0,0];function Ot(A,t){11!==Rt.gA&&(Pt=11,Tt=[A,t])}function St(A){Rt.IA.push(A)}function ht(A,t){Rt.EA=!0,Rt.gA=0,Pt=1,Ht=[A,t]}let xt=[];function Gt(A,t,B,n,e,E,Q,o,g,w){let C={U:e,R:uA(E,1),x:A,y:t,w:B,A:n,aA:o,sA:g,UA:w,eA:0,RA:0,gA:0,nA:!0,BA:!0,t:1,MA:2,EA:!0,dx:0};return pt(C,0),xt.push(C),Q(C),C}function Yt(A,t){let B=A[t.gA];B&&B(t),B=A[100],B&&B(t)}let Kt=0;let dt=A=>A===Kt;function pt(A,t){A.gA=t,A.eA=0,Yt(A.aA,A)}function kt(A,t,B){A.RA>t&&(A.RA=0,B())}let Nt=0,vt=0;function Lt(A,t,B=!0,E=(()=>{})){return vt++,Gt(A,t,3,8,et,nt.m,(A=>{A.EA=B,A.BA=!1}),{0(A){A.nA=!1,A.eA=5*w(),A.R.u=3},2(A){Nt++,A.R.F=0,m(1,[4,5],1),IA(A.R,nt.m,0),pt(A,3),E()}},{0(A){A.y=t+3*e(o(A.eA*C*3))},1(A){let B=A.eA,n=20-17*B;A.x+=D*A.dx,A.y=t+e(o(B*C*3))*n,B>=1&&pt(A,0)},3(A){A.y=t+35*n(A.eA,.5),A.eA>.5&&(xt=xt.filter((t=>t!=A)))}},{0(A){pt(A,2)},1(A){A.eA>1&&pt(A,2)}})}function yt(A,t,B){A.EA=!0,A.x=t,A.y=B,A.dx=t>Rt.x?30:-30,pt(A,1)}function mt(A){A.t=Rt.x>A.x?1:-1}function Jt(A,t){let B=Lt(A,t,!1);return Gt(A,t,4,16,Bt,_A,(A=>{A.VA=!0}),{0(A){IA(A.R,_A,3),A.R.u=3,A.nA=!0},1(A){},2(A){v=d,x(1,v,1),A.nA=!1,A.BA=!1,A.VA=!1}},{0(A){mt(A)},1(A){aA(A)&&pt(A,0)},2(A){A.eA}},{0(A){dt(1)&&(A.MA-=1,0===A.MA?(MA(A.R,tt,0),pt(A,2),yt(B,A.x,A.y)):(MA(A.R,At,0),pt(A,1)))},1:0,2:0})}et.i.map((A=>{A.D.map((A=>{let t=A.o,B=V(t),[n,e]=[t.width,t.height],E=B.getImageData(0,0,n,e),Q=E.data,o=KA[10],g=(A,t)=>4*(t*n+A);F(n,e,((A,t)=>{let B=0;for(let n=A-1;n>=0;--n)if(Q[g(n,t)+3]){B+=1;break}for(let e=A+1;e<n;++e)if(Q[g(e,t)+3]){B+=1;break}for(let n=t-1;n>=0;--n)if(Q[g(A,n)+3]){B+=1;break}for(let n=t+1;n<e;++n)if(Q[g(A,n)+3]){B+=1;break}let E=g(A,t);4!=B||Q[E+3]||(Q[E]=o[0],Q[E+1]=o[1],Q[E+2]=o[2],Q[E+3]=255)})),B.putImageData(E,0,0)}))}));let Wt=jA.N[0],qt=jA.v[0],bt={i:[((A,t,B,n,e,E)=>{let Q=new OffscreenCanvas(24,32),o=V(Q),g=0;return F(3,4,((t,B)=>{let n=A.i[E[g++]];o.drawImage(n.D[0].o,8*t+n.x,8*B+n.y)})),{x:5,y:-8,C:100,D:[{o:Q}]}})($A,0,0,0,0,[qt,qt,qt,Wt,Wt,Wt,Wt,Wt,Wt,Wt,Wt,Wt])]},Xt=lA(Qt);function zt(A,t){Zt(A,t).U=Xt}function Zt(A,t){let B=Lt(A,t,!1),E={HA:!1,PA:!1};return Gt(A,t,6,10,gt,ot.m,(A=>{A.MA=5,A.VA=!0}),{0(A){E.HA=!1,E.PA=!0},1(A){IA(A.R,ot.J,3),E.HA||(A.RA=2),E.HA=!0,E.PA=!0},2(A){IA(A.R,ot.advance,1)},4(A){A.dx=50*-A.t,MA(A.R,ot.q,0),A.MA--,A.MA<=0&&(v=d,x(1,v,1),yt(B,A.x,A.y),pt(A,8)),E.PA=!1},5(A){MA(A.R,ot.X,0)},6(A){A.dx=50*A.t,MA(A.R,ot.Z,0)},3(A){MA(A.R,ot.W,0)},7(A){MA(A.R,ot.j,0),E.PA=!1},8(A){MA(A.R,ot.$,0),A.BA=!1,A.nA=!1,A.VA=!1},9(A){MA(A.R,ot.advance,2),A.dx=-100*A.t,A.RA-=1}},{0(A){mt(A),A.detect=M(A,0,40)},1(A){A.nA=!0,((A,t,B)=>{let n=e(Rt.x-A.x);return n<20||n>30})(A)&&pt(A,2),kt(A,3,(()=>pt(A,5)))},2(A){((A,t,B,n)=>{mt(A);let E=e(Rt.x-A.x);return E<21?(A.x-=20*A.t*D,A.R.u=2,!1):!(E>29&&(A.x+=20*A.t*D,A.R.u=1,1))})(A)&&pt(A,1),kt(A,3,(()=>pt(A,5)))},4(A){A.nA=!1,A.x+=A.dx*D,A.dx-=A.dx*(1-n(.01,D)),aA(A)&&pt(A,1)},5(A){aA(A)&&pt(A,6)},6(A){A.x+=A.dx*D,A.dx-=A.dx*(1-n(.01,D)),A.attack=M(A,0,12),aA(A)&&(A.RA=0,pt(A,1))},3(A){A.nA=!1,aA(A)&&(A.RA=0,pt(A,1))},7(A){aA(A)&&pt(A,1),kt(A,3,(()=>pt(A,5)))},9(A){A.x+=A.dx*D,A.dx-=A.dx*(1-n(.001,D)),A.dx<5&&pt(A,1)}},{100(A){dt(1)&&E.PA&&(a([3,4],A.gA)||!(w()>.2)&&BA[6]?pt(A,4):(Rt.FA=!0,pt(A,7))),dt(4)&&pt(A,3),dt(5)&&a([1,2],A.gA)&&(w()<.4?pt(A,9):w()<.8?pt(A,3):pt(A,6))},0(A){dt(2)&&pt(A,1)}})}function jt(A,t,B){return Gt(A,t,8,11,Dt,Ct,(A=>{A.t=B,A.nA=!0,A.BA=!0}),{0(A){MA(A.R,Ct,1)},1(A){MA(A.R,rt,1)},2(A){MA(A.R,wt,1)}},{0(A){A.detect=M(A,-24,40)},1(A){A.eA>3&&pt(A,2)},2(A){A.attack=M(A,0,12),SA([A.x+50*A.t*D,10])===A.y&&(A.x+=50*A.t*D),A.eA>3&&pt(A,0)}},{0(A){pt(A,1),mt(A)}})}function $t(A,t,B){return Gt(A,t,8,12,lt,it,(A=>{A.nA=!1,A.BA=!1,A.eA=B%3}),{0(A){IA(A.R,it,5)},1(A){IA(A.R,it,0)}},{0(A){A.nA=!1,A.eA>3&&pt(A,1)},1(A){A.nA=!0,A.eA>3&&pt(A,0)}},{})}function _t(A){let t=A.split("\n").map((A=>{let t=A.split("|");return{TA:1*t[0],OA:t[1],SA:1*t[2]||0}}));tB={lines:t},BB=-1,QB()}function AB(){tB=0,nA=-1}cA(Xt,8);let tB=0,BB=0,nB=0,eB=2,EB=!1;let QB=()=>{BB++,nB=0,eB=2,EB=!1};function oB(){return 0===tB||BB>=tB.lines.length}let gB=0,wB=0,CB=!1,rB=-1,DB={};function iB(A){rB=A;let t=fB[A];xt=[],vt=0,Nt=0,UA=void 0,RA=[],AB(),tA=BA.slice(0),h(),Rt.EA=!1,gB=0,wB=0,FB=t,CB=!1,DB={},v=Y,t.hA(t)}function lB(){CB=!0}function cB(){BA=tA.slice(0),iB(rB)}function uB(){h(),q=0,f(10,(()=>{b(Y,2),b(N,2),b(K,2),b(p,2)}))}let fB=[{hA(A){DB.loading=!1},xA(){let A="INSERT CARTRIDGE\nPRESS SPACE";DB.loading&&(A+="\nLOADING",f(7*gB,(()=>A+=".")),gB>3&&lB()),A+=gB%.25>.1?"*":"",ut(3,3,A),st[32]&&!DB.loading&&(DB.loading=!0,gB=0)},GA:1,title:!0},{hA(A){ht(0,0),uB()},xA(){gB>3&&EA([0]),ut(3,3,"ROBIN\nOF\nTHIRTEENSLEY"),st[32]&&(eA(0),lB())},GA:3,title:!0},{hA(){ht(0,0),uB(),Ot(0,0),_t("|TO BE CONTINUETH!\n|THANK THEE FOR PLAYING THIS DEMO!\n|LOOK FOR THE FULL ADVENTURE AT GREAT STORES LIKE BYTE SHOP, IN THE FALL OF '83|2")},xA(){(gB>30||st[32])&&(AB(),lB())},GA:1,title:!0},{hA(){(()=>{ft();let A=HA(100,20);RA.push({tA:A,AA:[1,1],x:0,y:0});let t=26,B=1,n=()=>8*t+4;TA(0,0,24,jA.O,1),OA(7,1,5,jA.S,jA.h),t=10,ht(n(),24),t+=6,Lt(n(),It),t+=6,f(4,(A=>{TA(B,t,t+3,jA.O,1),Lt(8*(t+1)+4,8*(B+1),!0,(()=>eA(2))),t+=5,B+=2})),B=1,TA(0,t,t+24,jA.O,1),t+=12,Ft(t,B),Lt(400,It)})(),_t("1|HAH, YOU THINK YOU CAN JOIN OUR BAND?!\n1|PROVE IT. COLLECT ALL THE COIN")},xA(){EA([1,2]),Nt>=vt&&EA([3])},YA(){_t("1|A MONKEY COULD HAVE DONE THAT...")},GA:4},{hA(){(()=>{ft();let A=HA(100,20);RA.push({tA:A,AA:[1,1],x:0,y:0});let t=26,B=()=>8*t+4;TA(0,0,48,jA.O,1),t=3,ht(B(),24),t+=6,Ft(t,1),t+=12,Jt(B(),8),t+=6,Jt(B(),8),t+=6,Jt(B(),8)})(),_t("1|OK, COINS DON'T JUST GROW ON TREES\n1|SKEWER THESE TRAINING DUMMIES")},xA(){EA([4,5])},YA(){_t("1|WELL MAYBE YOU'RE NOT HOPELESS...")},GA:5},{hA(){(()=>{ft();let A=HA(100,20);RA.push({tA:A,AA:[1,1],x:0,y:0});let t=3,B=()=>8*t+4;TA(0,t,48,jA.O,1),t+=3,ht(B(),24),t+=6,Ft(t,1),t+=12,Zt(B(),8)})(),_t("1|LET'S TRY A REAL FIGHT\n1|WILL, GET OVER HERE!")},xA(){EA([6,7])},YA(){_t("1|THAT WAS PRETTY...\n2|JOHN, JOHN!\n2|THERE'S A CARRIAGE COMING!\n1|HO BOY! EVERYONE TO THE AMBUSH\n1|YOU TOO, ROBIN")},GA:6},{hA(){(()=>{ft();let A=HA(128,30);RA.push({tA:A,AA:[1,1],x:0,y:0});let t=3,B=1,n=()=>8*t+4,e=()=>8*B,E=t;t+=3,ht(n(),24),t+=6,PA(t,1,jA.h,1),Lt(n(),e()+8),t+=4,OA(t,1,2,jA.S,jA.h),Lt(n(),e()+16),t+=4,OA(t,1,4,jA.S,jA.h),Lt(n(),e()+32),t+=4,B=6,TA(B,t,t+4,jA.O,1),t+=10,TA(B,t,t+4,jA.O,1),t+=2,Lt(n(),e()+8),TA(0,E,t-2,jA.O,1),E=t+6,t+=8,TA(6,t,t+5,jA.O,1),t+=2,Lt(n(),e()+8),t+=8,TA(6,t,t+5,jA.O,1),t+=2,Lt(n(),e()+8),t+=2,OA(t,B+1,B+10,jA.S,jA.h),t-=13,B=1,jt(n(),e(),1),t+=12,jt(n(),e(),-1),t+=10,TA(0,E,t,jA.O,1),t+=4,E=t,t+=5,$t(n()+5,e(),0),t+=5,f(7,(A=>{$t(n()+5,e(),2.9-.15*A),t+=2})),t+=4,OA(t,B,B+8,jA.S,jA.h),t-=8,TA(5,t,t+4,jA.O,1),t-=8,TA(6,t,t+4,jA.O,1),t-=8,TA(10,t,t+4,jA.O,1),t+=4,B=15,TA(15,t,t+4,jA.O,1),t+=2,Lt(n(),e()+8),t+=5,TA(15,t,t+4,jA.O,1),t+=2,Lt(n(),e()+8),t+=5,TA(15,t,t+4,jA.O,1),t+=2,Lt(n(),e()+8),t+=6,t+=5,Ft(t,1),t+=10,TA(0,E,t,jA.O,1)})(),_t("1|MAKE YOUR WAY CAREFULLY\n1|STAY AWAY FROM THE WILDLIFE\n1|OH, AND THE TRAPS. WE HAVE BOOBY TRAPS")},xA(){EA([8])},YA(){_t("1|EVERYONE HERE? SHHH THEY'RE COMING")},GA:7},{hA(){(()=>{ft();let A=HA(128,30);RA.push({tA:A,AA:[1,1],x:0,y:0});let t=3,B=()=>8*t+4,n=t;OA(t,1,4,jA.S,jA.h),t+=20,ht(B(),24),t-=8,zt(B(),8),t+=16,zt(B(),8),t+=12,OA(t,1,4,jA.S,jA.h),t+=12,Ft(t,1),t+=8,TA(0,n,t,jA.O,1)})(),_t("1|IT'S A REVERSE AMBUSH!\n1|ROBIN TAKE CARE OF THE SHERRIF'S MEN!")},xA(){},YA(){_t("3|HELP HELP!\n2|IS THAT... THE MAID MARION?\n1|ROBIN, STOP THAT CARRIAGE!")},GA:2}];let FB;iB(7);let IB=document.getElementById("c"),MB=128,aB=80;IB.width=MB,IB.height=aB;let sB=V(IB);sB.imageSmoothingEnabled=!1;let UB=0,RB=H;IB.style.display="none";let VB=document.createElement("canvas");document.body.appendChild(VB),VB.width=1024,VB.height=640;let HB=VB.getContext("webgl2");{let A=[-1,-1,-1,1,1,-1,1,1],t=HB.createBuffer();HB.bindBuffer(HB.ARRAY_BUFFER,t),HB.bufferData(HB.ARRAY_BUFFER,new Float32Array(A),HB.STATIC_DRAW);let B="\nattribute vec2 c;\nvarying vec2 u;\nvoid main(void) {\nu=c*0.5+0.5;\nu.y=1.0-u.y;\ngl_Position=vec4(c,0.5,1.0);\n}",n=HB.createShader(HB.VERTEX_SHADER);HB.shaderSource(n,B),HB.compileShader(n);let e="\nprecision highp float;\nvarying vec2 u;\nuniform sampler2D t;\nvoid main(void) {\nvec2 a=u;\na.x+=sin(u.x*6.28)*0.01;\na.y+=sin(u.y*6.28)*0.01;\nvec4 c=texture2D(t,a);\nc.r=texture2D(t,a+vec2(0.004,0.0)).r;\nc.b=texture2D(t,a-vec2(0.004,0.0)).b;\nvec2 d=abs(2.0*u-1.0);\nfloat v=1.0-pow(d.x,20.0)-pow(d.y,20.0);\nfloat l=1.0-pow(d.x,4.0)-pow(d.y,4.0);\nc*=(0.5+0.6*l)*step(0.0,v)*(0.6+0.5*abs(sin(a.y*3.14*80.0)));\nc.a = 0.8;\ngl_FragColor=c;\n}",E=HB.createShader(HB.FRAGMENT_SHADER);HB.shaderSource(E,e),HB.compileShader(E);let Q=HB.createProgram();HB.attachShader(Q,n),HB.attachShader(Q,E),HB.linkProgram(Q),HB.useProgram(Q),HB.bindBuffer(HB.ARRAY_BUFFER,t),HB.vertexAttribPointer(0,2,HB.FLOAT,!1,0,0),HB.enableVertexAttribArray(0);let o=HB.createTexture();HB.bindTexture(HB.TEXTURE_2D,o),HB.texParameteri(HB.TEXTURE_2D,HB.TEXTURE_MIN_FILTER,HB.LINEAR)}!function B(g){wA(),U("#21181b"),sB.fillRect(0,0,MB,aB);let w=E(100,g-UB);if(0===UB&&(w=0),UB=g,D=w/1e3,i+=D,function(A){if(!A.EA)return;let t=500*D,B=Q(SA([A.x-2,A.y]),SA([A.x+2,A.y])),E=()=>!!(st[38]&&A.QA<2)&&(A.QA||(A.rA=A.gA),A.y+=.1,A.dy=150,A.QA++,A.QA>1&&eA(8),A.CA=4,!0),g=B=>at[37]?(A.dx-=t*B,!0):!!at[39]&&(A.dx+=t*B,!0),w=()=>(A.y>B||0!=A.dy)&&(A.dy-=500*D,A.y+=A.dy*D,A.dy<0&&s(A.CA),!0),C=()=>A.y<=B&&A.dy<=0&&(A.y=B,A.dy=0,A.oA=B,A.QA=0,10!==A.rA&&J(0),!0),r=()=>{let t=!1;return xt.forEach((B=>{B.VA&&B.EA&&I(B,A.wA)&&(t=!0)})),t},l=()=>{r()&&(A.cA||(v=k),A.cA=!0,s(8),A.wA.w=52)},c=()=>{r()||(A.cA&&(v=Y),A.cA=!1,s(9),A.wA.w=26)},u=()=>!!st[32]&&s(7)||!!st[40]&&s(12)||!!st[38]&&s(13),f=()=>{A.IA.length>0&&(A.MA-=1,A.MA<=0&&cB()),A.IA.map((t=>{s(10),A.dx=A.x<t.x?-150:150,A.dy=100}))},F=()=>{let t=A.focus;0!==t&&(A.t=A.x<t.x?1:-1)},a=e(A.dx*D),s=t=>{if(A.gA!==t)return A.U=zA,A.gA=t,A.eA=0,[H,()=>{IA(A.R,NA,1),a>.2&&s(2),l()},()=>{IA(A.R,kA,1)},()=>{m(0,[0,1]),MA(A.R,vA,1)},()=>{IA(A.R,LA,1)},()=>{A.FA=!1,IA(A.R,yA,1)},()=>{IA(A.R,mA,1)},()=>{A.FA=!1,A.dx=A.t*(i-A.uA<2?250:175),MA(A.R,JA,0)},()=>{MA(A.R,WA,0)},()=>{MA(A.R,WA,0)},()=>{A.rA=10,v=p,x(0,p,1),A.CA=10,IA(A.R,LA,1)},()=>{IA(A.R,qA,1)},()=>{A.dx=75*A.t,MA(A.R,bA,0)},()=>{A.dx=-10*A.t,MA(A.R,XA,0)}][t](),!0};var U,R;Vt&&(s(5),Vt=!1),Ht&&(s(1),A.x=Ht[0],A.y=Ht[1],A.dx=0,A.dy=0,A.oA=SA([A.x,A.y]),A.MA=3,U=A.x,R=A.y,oA[0]=QA[0]=U,oA[1]=QA[1]=R,Ht=0);let V=9999999,P=0;xt.forEach((t=>{if(t.nA&&t.EA){let B=e(t.x-A.x),n=e(t.y-A.y);B<V&&n<16&&(V=B,P=t)}})),A.focus=P,A.eA+=D,null!==Pt&&(s(Pt),Pt=null),A.R.M=()=>{};let T=()=>{m(0,[3,4])};let O=!0;A.DA=0,A.iA=0,A.lA=0,[H,()=>{g(1)&&s(2),E()&&s(3),l(),f(),w()},()=>{A.R.M=T,A.eA>.25&&eA(1),g(1),a<.1&&s(1),E()&&s(3),l(),f(),w()},()=>{g(.75),w(),E()},()=>{w(),C()?s(1):E()&&s(3)},()=>{eA(4),O=!1,F(),g(.5)&&s(6),u(),c(),f(),w()},()=>{A.R.M=T,O=!1,F(),g(.5),a<.1&&s(5),u(),c(),f(),w()},()=>{O=!1,f(),sA(A.R,0)&&(A.DA={x:A.x+8*A.t,y:A.y,w:9,A:12}),aA(A)&&s(5),A.FA&&(s(10),A.dx=50*-A.t,A.dy=50)},()=>{O=!1,aA(A)&&s(5)},()=>{O=!1,aA(A)&&s(1)},()=>{A.FA||(A.U=o(70*A.eA)>0?Ut:zA),O=!1,w(),C()&&s(1)},()=>{A.dx=0,A.dy=0;let t=1-n(.01,D);A.x+=(Tt[0]-A.x)*t,A.y+=(Tt[1]-A.y)*t},()=>{O=!1,f(),aA(A)&&s(5),A.lA=M(A,0,20)},()=>{O=!1,sA(A.R,0)&&(A.iA={x:A.x+5*A.t,y:A.y,w:6,A:12}),aA(A)&&s(5),u()}][A.gA](),A.IA=[],A.dx*=n(.01,D),A.x=hA(A.x,A.y,A.w,A.dx*D),O&&(A.t=A.dx>=0?1:-1),A.y<=VA+1&&cB(),xt.forEach((t=>{t.EA&&I(A,t)&&(t.nA?St(t):t.BA&&(A.x=t.x-(A.w+t.w)*A.t))})),A.wA.x=A.x,A.wA.y=A.y,fA(A.U,A.R),((A,t)=>{QA[0]=A,QA[1]=t})(A.x+A.dx/4,A.oA+(A.y-A.oA)/4+10)}(Rt),function(){let A=!1;xt.forEach((t=>{t.EA&&Rt.EA&&(t.detect=void 0,t.attack=void 0,t.eA+=D,t.RA+=D,Yt(t.sA,t),I(Rt.DA,t)&&(Kt=1,Yt(t.UA,t),A=!0),I(Rt,t)&&(Kt=0,Yt(t.UA,t)),I(t.detect,Rt)&&(Kt=2,Yt(t.UA,t)),I(t.attack,Rt)&&(Kt=3,Yt(t.UA,t),St(t)),I(t.attack,Rt.iA)&&(Kt=4,Yt(t.UA,t),eA(6),Rt.uA=i,Rt.dx=60),I(t,Rt.lA)&&(Kt=5,Yt(t.UA,t),eA(7),Rt.fA=i),fA(t.U,t.R))})),A&&(J(1,1),eA(5),Rt.FA||(Rt.dx*=.5))}(),oA[0]+=(QA[0]-oA[0])*(1-n(.001,D)),oA[1]+=(QA[1]-oA[1])*(1-n(.01,D)),gA[0]=A(oA[0])-64,gA[1]=40-A(oA[1]),RA.forEach((A=>{GA=A.AA;let t=A.tA;t&&F(t.V,t.H,((B,n)=>{let e=t.P[n*t.V+B];e&&e.index>=0&&YA(e.index,A.x+B,A.y+n)}));let B=A._;B&&(rA(GA[0],GA[1]),sB.scale(1,-1),R(B.o,A.x,A.y));let n=A.KA;if(n){n.I+=100*D;let t=xA.i[n.F].C;n.I>t&&(n.I-=t,n.F++,n.F>n.l[1]&&(n.F=n.l[0])),YA(n.F,A.x,A.y)}})),xt.forEach((A=>{A.EA&&(CA(A.x,A.y),A.t<0&&DA(),FA(A.U,A.R.F,-16,-24))})),(A=>{A.EA&&(CA(A.x,A.y),A.t<0&&DA(),FA(A.U,A.R.F,-16,-24))})(Rt),sB.resetTransform(),(()=>{if(0===tB)return!1;let B=tB.lines[BB];if(!B)return!1;if(nB+=D,EB&&(eB-=D),1===B.SA&&st[90])return QB();if(0===B.SA&&eB<0)return QB();let n=22,e=3;B.TA>0&&(sB.resetTransform(),U(dA[0]),s(.5),sB.fillRect(0,52,22,28),s(1),FA(Et,2*(B.TA-1)+(EB?0:A(8*nB)%2),1,53),n=20,e=22);let Q=B.OA.split(" "),o="",g=[];for(;Q.length;)o.length+Q[0].length>n&&(g.push(o),o=""),o+=" "+Q.shift();g.push(o);let w=80-8*g.length-1,C=20*nB;return g.map((A=>{let B=E(C,A.length);s(.5),sB.fillRect(e,w-1,100,8),s(1);let n=A.substring(0,B),Q=ut(0,0,n,!0);ut(e+t((124-e-Q)/2),w,n),C-=B,w+=8})),EB=C>0,!0})()||vt&&(FA(et,0,86,55),ut(107,72,`${Nt}/${vt}`)),!FB.title){let A="";f(3,(t=>A+=t<Rt.MA?"$":"%")),ut(56,4,A)}gB+=D,FB.xA?.(FB),CB?(DB.YA||(FB.YA?.(),DB.YA=!0),oB()&&(wB-=3*D,wB<0&&(wB=0,iB(FB.GA)))):wB=E(wB+D,1),wB<1&&(U(dA[0]),s(1-wB),sB.fillRect(0,0,MB,aB),s(1)),st=[],RB(),HB.texImage2D(HB.TEXTURE_2D,0,HB.RGBA,HB.RGBA,HB.UNSIGNED_BYTE,IB),HB.drawArrays(HB.TRIANGLE_STRIP,0,4),Z-=D,Z<0&&(Z+=.05,z++,S=S.filter((A=>A[0]>z||(G[A[1]].port.postMessage([A[2],E(.1,.1*A[3])]),A[4]&&(v=A[4]),!1)))),requestAnimationFrame(B)}(0);